{% extends 'base.html' %}

{% block title %}Lista blogów{% endblock %}

{% block content %}
<style>
body {
    background-color: #f3f4f6;
    font-family: 'Segoe UI', sans-serif;
}
</style>

<div class="container mt-4">
    <h1 class="mb-4">Blogi użytkowników:</h1>

    <!-- FILTROWANIE KATEGORII -->
    <div class="mb-4">
        <strong>Filtruj po kategorii:</strong><br>

        <!-- Wszystkie -->
        <a href="{% url 'blog_list' %}"
           class="btn btn-sm mt-2 {% if not selected_category %}btn-primary{% else %}btn-outline-primary{% endif %}">
            Wszystkie
        </a>

        <!-- Kategorie -->
        {% for cat in categories %}
            <a href="?category={{ cat.id }}"
               class="btn btn-sm mt-2 {% if selected_category|add:'0' == cat.id|stringformat:'s' %}btn-primary{% else %}btn-outline-primary{% endif %}">
                {{ cat.name }}
            </a>
        {% endfor %}
    </div>

    <!-- LISTA BLOGÓW -->
    {% if blogs %}
        <div class="list-group">
            {% for blog in blogs %}
                <a href="{% url 'blog_detail' blog.id %}" class="list-group-item list-group-item-action d-flex align-items-center">

                    {% if blog.image %}
                        <img src="{{ blog.image.url }}" style="width:80px; height:auto;" class="me-3 rounded">
                    {% endif %}

                    <div>
                        <h5 class="mb-1">{{ blog.title }}</h5>

                        {% if blog.category %}
                            <span class="badge bg-secondary">{{ blog.category.name }}</span>
                        {% endif %}

                        <small class="d-block mt-1">
                            Właściciel: {{ blog.owner.email }} |
                            Utworzono: {{ blog.created_at }}
                        </small>
                    </div>

                </a>
            {% endfor %}
        </div>
    {% else %}
        <p>Brak blogów do wyświetlenia.</p>
    {% endif %}
</div>
{% endblock %}
